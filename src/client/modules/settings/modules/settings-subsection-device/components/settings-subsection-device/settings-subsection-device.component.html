<div class="flex flex-gap-2">
	@if (device_type() !== 'desktop') {
		<div class="mobile-settings-nav">
			<button matButton type="button" [matMenuTriggerFor]="settings_menu">
				<mat-icon>menu</mat-icon>
				<span class="text-nowrap font-size-s">Settings</span>
			</button>
		</div>
	}
	<div class="grid flex-grow" #settings_container [class.tablet-view]="device_type() !== 'desktop'">
		<div class="settings-location nav1" #nav1>
			<div class="sticky-setting z-index-1">
				<div class="flex flex-justify-between flex-items-end p-b-0-5">
					<div>
						<div class="title-l">Location</div>
						<div class="font-size-xs orc-outline-color">Settings for local display and timezone</div>
					</div>
				</div>
				<div class="category-rule"></div>
			</div>
			<div class="settings-box">
				<div class="flex flex-gap-2 flex-wrap">
					<div class="flex-1">
						<div class="font-size-xs orc-outline-color p-b-0-5">Timezone</div>
						<orc-settings-subsection-device-timezone
							[timezone]="timezone()"
							[loading]="loading_static()"
							[locale]="locale_display()"
							(timezoneChange)="onTimezoneChange($event)"
						></orc-settings-subsection-device-timezone>
					</div>

					<div class="flex-1">
						<div class="font-size-xs orc-outline-color p-b-0-5">Locale</div>
						<orc-settings-subsection-device-locale
							[locale]="locale()"
							[loading]="loading_static()"
							[currency_btc]="currency_btc()"
							(localeChange)="onLocaleChange($event)"
						></orc-settings-subsection-device-locale>
					</div>
				</div>
			</div>
		</div>

		<div class="settings-theme nav2" #nav2>
			<div class="sticky-setting z-index-1">
				<div class="flex flex-justify-between flex-items-end p-b-0-5">
					<div>
						<div class="title-l">Theme</div>
						<div class="font-size-xs orc-outline-color">Settings for the appearance of the application</div>
					</div>
				</div>
				<div class="category-rule"></div>
			</div>
			<div class="settings-box">
				<orc-settings-subsection-device-theme
					[theme]="theme()"
					[loading]="loading_static()"
					(themeChange)="onThemeChange($event)"
				></orc-settings-subsection-device-theme>
			</div>
		</div>

		<div class="settings-currency nav3" #nav3>
			<div class="sticky-setting z-index-1">
				<div class="flex flex-justify-between flex-items-end p-b-0-5">
					<div>
						<div class="title-l">Currency</div>
						<div class="font-size-xs orc-outline-color">Settings for currency display</div>
					</div>
				</div>
				<div class="category-rule"></div>
			</div>
			<div class="settings-box">
				<div class="flex flex-gap-2 flex-wrap">
					<div class="flex-1">
						<div class="font-size-xs orc-outline-color p-b-0-5">Bitcoin display</div>
						<orc-settings-subsection-device-currency
							[currency]="currency()"
							[loading]="loading_static()"
							[locale]="locale_display()"
							mode="type_btc"
							(currencyChange)="onCurrencyChange($event, 'type_btc')"
						></orc-settings-subsection-device-currency>
					</div>

					<div class="flex-1">
						<div class="font-size-xs orc-outline-color p-b-0-5">Fiat display</div>
						<orc-settings-subsection-device-currency
							[currency]="currency()"
							[loading]="loading_static()"
							[locale]="locale_display()"
							mode="type_fiat"
							(currencyChange)="onCurrencyChange($event, 'type_fiat')"
						></orc-settings-subsection-device-currency>
					</div>
				</div>
			</div>
		</div>

		<div class="settings-ai nav4" #nav4>
			<div class="sticky-setting z-index-1">
				<div class="flex flex-justify-between flex-items-end p-b-0-5">
					<div>
						<div class="title-l">AI</div>
						<div class="font-size-xs orc-outline-color">Settings for the AI agents</div>
					</div>
				</div>
				<div class="category-rule"></div>
			</div>
			<div class="settings-box">
				<orc-settings-subsection-device-ai
					[enabled]="enabled_ai"
					[loading]="loading_ai()"
					[error]="error_ai()"
					[model_options]="ai_models()"
					[model]="model()"
					(modelChange)="onModelChange($event)"
				></orc-settings-subsection-device-ai>
			</div>
		</div>
	</div>
	@if (device_type() === 'desktop') {
		<div class="p-r-2">
			<orc-nav-tertiary
				class="settings-tertiary-nav"
				[keys]="page_settings()?.tertiary_nav ?? []"
				[items]="tertiary_nav_items"
				(orderChange)="onTertiaryNavChange($event)"
				(keySelect)="onTertiaryNavSelect($event)"
			>
				<div class="nav-tertiary-title">Settings</div>
			</orc-nav-tertiary>
		</div>
	}
</div>

<mat-menu #settings_menu="matMenu" yPosition="below" xPosition="before" class="orc-sticky-menu w-min-10">
	<div class="p-l-1 p-t-0-5 settings-tertiary-nav-mobile">
		<orc-nav-tertiary
			[keys]="page_settings()?.tertiary_nav ?? []"
			[items]="tertiary_nav_items"
			(orderChange)="onTertiaryNavChange($event)"
			(keySelect)="onTertiaryNavSelect($event)"
		></orc-nav-tertiary>
	</div>
</mat-menu>
