<div class="mint-keyset-rotation-container p-t-1">
	<mat-card appearance="outlined" class="relative overflow-hidden">
        <mat-card-content class="orc-surface-container-low-bg">
            <div class="flex flex-gap-2">
                <div class="flex-1">
                   
                    <form
                        class="flex-grow flex-1 flex flex-column flex-gap-1"
                        [formGroup]="form_group"
                        (ngSubmit)="onSubmit($event)"
                        (keydown.enter)="onSubmit($event)">      
                        <div class="flex flex-gap-2">
                            <mat-form-field 
                                appearance="fill" 
                                hideRequiredMarker="true"
                                class="keyset-form-field orc-dynamic-form-field orc-hot-form-field p-r-2">
                                <mat-label>Keyset Unit</mat-label>
                                <mat-select formControlName="unit">
                                    @for (unit of unit_options; track unit.value) {
                                    <mat-option [value]="unit.value">{{unit.label}}</mat-option>
                                    }
                                </mat-select>
                            </mat-form-field>
                            <div class="flex-1">
                                <orc-help-text class="orc-surface-container-high-bg">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.  Lorem ipsum dolor sit amet,
                                </orc-help-text>
                            </div>
                        </div>
                        <div class="flex flex-gap-2">
                            <mat-form-field 
                                appearance="fill" 
                                hideRequiredMarker="true"
                                class="keyset-form-field orc-dynamic-form-field orc-hot-form-field p-r-2">
                                <mat-label>Input Fee PPK</mat-label>
                                <input 
                                    type="number" 
                                    step="1"
                                    min="0"
                                    matInput 
                                    formControlName="input_fee_ppk" 
                                    placeholder="Ex. 100">
                            </mat-form-field>
                            <div class="flex-1">
                                <orc-help-text class="orc-surface-container-high-bg">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing el
                                </orc-help-text>
                            </div>
                        </div>
                        <div class="flex flex-gap-2">
                            <mat-form-field 
                                appearance="fill" 
                                hideRequiredMarker="true"
                                class="keyset-form-field orc-dynamic-form-field orc-hot-form-field p-r-2">
                                <mat-label>Max Order</mat-label>
                                <input 
                                    type="number" 
                                    step="1"
                                    min="0"
                                    matInput 
                                    formControlName="max_order" 
                                    placeholder="Ex. 32">
                            </mat-form-field>
                            <div class="flex-1">
                                <orc-help-text class="orc-surface-container-high-bg">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor.
                                </orc-help-text>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="flex-1">
                    <div class="flex flex-column flex-gap-1 flex-items-center">
                        <div class="font-size-xs orc-outline-color">Keyset Rotating In</div>
                        <div class="flex flex-items-center flex-gap-1">
                            <orc-graphic-asset 
                                [unit]="form_group.get('unit')?.value" 
                                [height]="'1.5rem'">
                            </orc-graphic-asset>
                            <orc-mint-keyset
                                class="high-bg"
                                [active]="true"
                                [index]="keyset_out.derivation_path_index + 1"
                                [input_fee_ppk]="form_group.get('input_fee_ppk')?.value">
                            </orc-mint-keyset>
                            <div>
                                <span [innerHTML]="0 | amount : form_group.get('unit')?.value : 'mint'"></span>
                            </div>
                        </div>
                        <div class="p-v-0-5">
                            <mat-icon class="icon-lg mat-symbol-outline orc-outline-color">autorenew</mat-icon>
                        </div>
                        <!-- <mat-icon class="icon-lg mat-symbol-outline orc-outline-color">autorenew</mat-icon> -->
          
                        <div class="font-size-xs orc-outline-color">Keyset Rotating Out</div>
                        <div class="flex flex-items-center flex-gap-1">
                            <orc-graphic-asset 
                                [unit]="keyset_out.unit" 
                                [height]="'1.5rem'">
                            </orc-graphic-asset>
                            <orc-mint-keyset
                                class="high-bg"
                                [active]="false"
                                [index]="keyset_out.derivation_path_index"
                                [input_fee_ppk]="keyset_out.input_fee_ppk">
                            </orc-mint-keyset>
                            <div>
                                @if( keyset_out_balance ) {
                                    <span [@fadeIn] [innerHTML]="keyset_out_balance.balance | amount : form_group.get('unit')?.value : 'mint'"></span>
                                }@else {
                                    <div class="h-2 w-6 orc-corner-full shimmer-high"></div>
                                }
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>