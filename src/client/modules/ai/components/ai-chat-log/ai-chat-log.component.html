<!-- <div class="ai-chat-log-container">
    <div class="ai-chat-log-header">
        <orc-ai-agent [agent]="agent_definition"></orc-ai-agent>
    </div>
    <div class="category-rule"></div>
    <div class="ai-chat-log-main">
        @for (message of conversation?.messages; track message.id) {
            @switch (message.role) {
                @case ('SYSTEM') {
                    <orc-ai-chat-message-system 
                        [message]="message">
                    </orc-ai-chat-message-system>
                }
                @case ('USER') {
                    <orc-ai-chat-message-user 
                        [message]="message">
                    </orc-ai-chat-message-user>
                }
                @case ('ASSISTANT') {
                    <orc-ai-chat-message-assistant 
                        [message]="message"
                        [revision]="revision"
                        [agent]="agent_definition">
                    </orc-ai-chat-message-assistant>
                }
                @case ('FUNCTION') {
                    <div>function</div>
                }
                @default {
                    <div>default</div>
                }
            }
        }
    </div>
    <div class="category-rule"></div>
    <div class="ai-chat-log-footer">
        <button mat-button>
            <div class="orc-outline-color font-size-xs">clear conversation</div>
        </button>
    </div>
</div> -->

<mat-accordion displayMode="flat" class="ai-chat-log-container orc-low-accordion">
    <mat-expansion-panel [expanded]="view() === 0" (opened)="setView(0)">
        <mat-expansion-panel-header>
             <orc-ai-agent [agent]="agent_definition"></orc-ai-agent>
        </mat-expansion-panel-header>
        <div>
            more agent info
        </div>
    </mat-expansion-panel>
    <div class="p-h-1">
        <div class="category-rule"></div>
    </div>
    <mat-expansion-panel [expanded]="view() === 1" (opened)="setView(1)" class="flex-grow">
        <mat-expansion-panel-header>
            Chat Log
        </mat-expansion-panel-header>
        <div class="ai-chat-log-main">
            @for (message of conversation?.messages; track message.id) {
                @switch (message.role) {
                    @case ('SYSTEM') {
                        <orc-ai-chat-message-system 
                            [message]="message">
                        </orc-ai-chat-message-system>
                    }
                    @case ('USER') {
                        <orc-ai-chat-message-user 
                            [message]="message">
                        </orc-ai-chat-message-user>
                    }
                    @case ('ASSISTANT') {
                        <orc-ai-chat-message-assistant 
                            [message]="message"
                            [revision]="revision"
                            [agent]="agent_definition">
                        </orc-ai-chat-message-assistant>
                    }
                    @case ('FUNCTION') {
                        <div>function</div>
                    }
                    @default {
                        <div>default</div>
                    }
                }
            }
        </div>
    </mat-expansion-panel>
    <div class="p-h-1">
        <div class="category-rule"></div>
    </div>
    <div class="ai-chat-log-footer">
        <button mat-button>
            <div class="orc-outline-color font-size-xs">clear conversation</div>
        </button>
    </div>
</mat-accordion>
  