<div class="crew-table-container">
	@if (!loading() && data()) {
		<div class="p-h-1 flex flex-column flex-grow flex-justify-between" animate.enter="orc-animation-fadein">
			<table mat-table multiTemplateDataRows [dataSource]="data()" matSort class="orc-feature-table">
				<ng-container matColumnDef="test">
					<th mat-header-cell *matHeaderCellDef class="data-table-sticky-header">Test</th>
					<td mat-cell *matCellDef="let entity">
						{{ entity | json }}
					</td>
				</ng-container>

				<ng-container matColumnDef="more_detail">
					<td mat-cell *matCellDef="let entity" [attr.colspan]="displayed_columns.length">
						<div class="more-entity-wrapper" [class.more-entity-wrapper-expanded]="more_entity()?.id === entity.id">
							<div class="more-entity-content">hello more</div>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayed_columns; sticky: true"></tr>
				<tr
					mat-row
					*matRowDef="let row; columns: displayed_columns"
					class="entity-row"
					[class.expanded]="more_entity === row"
					(click)="toggleMore(row)"
				></tr>
				<tr mat-row *matRowDef="let row; columns: ['more_detail']" class="more-entity-row"></tr>
			</table>
		</div>
	} @else {
		<div class="flex flex-items-center flex-justify-center h-min-18">
			<mat-icon class="icon-lg mat-symbol-outline orc-outline-variant-color">table</mat-icon>
		</div>
	}
</div>
